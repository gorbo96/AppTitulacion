{"version":3,"file":"default-src_app_pages_admin_member-spence_member-spence_page_ts.js","mappings":"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","sources":["./src/app/domain/gasto.ts","./src/app/pages/admin/member-spence/member-spence.page.ts","./src/app/services/gastos.service.ts","./src/app/services/user/user.service.ts"],"sourcesContent":["//Declaracion de clase Gasto\r\nexport class Gasto {\r\n    id:string;\r\n    monto:number;\r\n    id_usuario:string;\r\n    id_familia:string;\r\n    id_categoria:string;\r\n    fecha:string;\r\n    descripcion:string;\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { Gasto } from 'src/app/domain/gasto';\r\nimport { GastosService } from 'src/app/services/gastos.service';\r\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\r\nimport { take } from 'rxjs/operators';\r\nimport { AlertController, MenuController,LoadingController } from '@ionic/angular';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\n\r\n@Component({\r\n  selector: 'app-member-spence',\r\n  templateUrl: './member-spence.page.html',\r\n  styleUrls: ['./member-spence.page.scss'],\r\n})\r\n\r\nexport class MemberSpencePage implements OnInit {\r\n\r\n  //Variables para almacenamiento de respuestas desde Firebase de consultas de cada coleccion\r\n  @Input() id: string;\r\n  gastos:any\r\n  usuario:any  \r\n  categories: any\r\n\r\n  //Variables para una notificacion especifica\r\n  alert: string\r\n  advice: string\r\n\r\n  gastosF:Gasto[]=[]//Vector de objetos 'Gasto', almacenar en formato visualizacion de informacion de firebase\r\n\r\n  private sessionUser : any//Variable para la obtencion de usuario logeado\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private router: Router,\r\n              private userService: UserService, \r\n              private gastoService: GastosService,//Declaracion de servicios para gastos\r\n              private alertCtrl: AlertController,//Declaracion de servicios para alertas\r\n              private auth :  AuthenticationService,//Declaracion de servicios de autenticacion\r\n              private loadingController: LoadingController,//Declaracion de servicios de pantalla de progreso\r\n              public menuCtrl: MenuController ) {//Declaracion de servicios para control del menu principal\r\n                this.menuCtrl.enable(true)//Menu activado\r\n              } \r\n\r\n  async ngOnInit() {\r\n\r\n    return await this.loadingController.create({ }).then(a => {//Llamado para pantalla de carga\r\n      a.present().then(async () => {\r\n        try {\r\n\r\n          //  Obtener las categorías\r\n          await this.gastoService.getCategories().pipe(take(1)).subscribe(cat => {\r\n            this.categories = cat;\r\n            this.obtenerGastosUsr(a)//Llamado a funcion diseñada\r\n          },\r\n          err => {\r\n            console.log('HTTP Error', err);\r\n            this.alert = \"Ocurrió un error al cargar sus datos\"\r\n            this.advice = 'Por favor, inténtelo de nuevo'\r\n            \r\n            this.genericAlert(this.alert, this.advice)\r\n          },\r\n          () => console.log('HTTP request stream done'));\r\n\r\n        }catch(error){\r\n           //Caso de encontrar un error, definir mesaje para alerta y lanzar alerta\r\n           console.log(error)\r\n           this.alert = \"Ocurrió un error al cargar sus datos\"\r\n           this.advice = 'Por favor, inténtelo de nuevo'\r\n          \r\n           a.dismiss().then(() => console.log('abort presenting'))//Termino de pantalla de carga\r\n           this.genericAlert(this.alert, this.advice)\r\n \r\n         }\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  async obtenerGastosUsr(a: any){//Funcion para obtener los gastos correspondientes al usuario logeado     \r\n    \r\n    this.gastos=this.gastoService.obtenerGastos(this.id)//Utilizacion de servicio para obtener gastos del usuario en base a consulta base de datos\r\n        \r\n    this.gastos.forEach(element => {\r\n      for (let index = 0; index < element.length; index++) {\r\n        let aux:Gasto=new Gasto()//Variable auxilizar de clase gasto\r\n        //Asignacion de valores correspondientes a la lectura desde Firebase, con cambios para la visualizacion\r\n        aux.id=element[index].id        \r\n        aux.monto=element[index].monto\r\n        aux.id_usuario=element[index].id_usuario\r\n        //Cambio de contenido de variabe segun categoria\r\n        this.categories.forEach(cat => {\r\n          if (cat.id === element[index].id_categoria){\r\n            aux.id_categoria = cat.name\r\n          }\r\n          \r\n        });  \r\n        aux.fecha=element[index].fecha\r\n        aux.descripcion=element[index].descripcion                        \r\n        this.gastosF.push(aux) //Adicion a vector para posterio lectura\r\n      }\r\n\r\n      a.dismiss().then(() => console.log('abort presenting'))//Termino de pantalla de carga\r\n    });\r\n  }\r\n\r\n  async genericAlert(alert_message, advice){//Funcion para creacion de alerta\r\n    const prompt = await this.alertCtrl.create({//Llamado a creacion con el mensaje antes definido   \r\n      header: 'Lo sentimos',  \r\n      subHeader: alert_message,\r\n      message: advice,\r\n      buttons: ['Aceptar']//Boton de confirmacion\r\n    });\r\n    await prompt.present()\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Gasto } from '../domain/gasto';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GastosService {  \r\n  // Debugging de la función localmente\r\n  // private regressionUrl = \"http://localhost:5000/gestionar-gastos/us-central1/regressionReq\";\r\n  \r\n  constructor(public afs: AngularFirestore, private http: HttpClient) { \r\n     \r\n  }\r\n\r\n  guardar(gasto:Gasto){//Funcion para guardar 'Gasto' en coleccion de Gastos\r\n    const refGastos = this.afs.collection(\"gastos\");//Referencia a la collecion en la que se desea guardar\r\n      \r\n      if (gasto.id == null){//En caso de que el objeto recibido no tenga un ID generarlo\r\n        gasto.id = this.afs.createId();        \r\n      }\r\n  \r\n      refGastos.doc(gasto.id).set(Object.assign({}, gasto));//Con la referencia guardar los datos\r\n  }\r\n\r\n  obtenerGastos(idG:any):Observable<any[]>{\r\n    return this.afs.collection(\"gastos\",\r\n            ref=> ref.where(\"id_usuario\",\"==\",idG)).valueChanges();//Consultar en la coleccion gastos todos los valores correspondientes a un usuario\r\n  } \r\n  \r\n  obtenerGastosFamilia(idG:any):Observable<any[]>{\r\n    return this.afs.collection(\"gastos\",\r\n            ref=> ref.where(\"id_familia\",\"==\",idG)).valueChanges();//Consultar en la coleccion gastos todos los valores correspondientes a un usuario\r\n  } \r\n\r\n  obtenerGastoPorId(id) {\r\n    return this.afs.collection(\"gastos\", ref => ref.where(\"id\", \"==\", id)).valueChanges()\r\n  }\r\n\r\n  obtenerusrFamilia(idF:any):Observable<any[]>{    \r\n    //Consultar en la coleccion users todos los usuarios correspondientes a una familia y que se encuentren activos\r\n    return this.afs.collection(\"users\",\r\n            ref=> ref.where(\"id_familia\",\"==\",idF).where(\"active\",\"==\",true)).valueChanges();\r\n  }\r\n  \r\n  getCategories(){\r\n    return this.afs.collection(\"categories\").valueChanges()\r\n  }\r\n\r\n  regression(id: any) {\r\n    let body = new URLSearchParams();\r\n\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/x-www-form-urlencoded',\r\n        'Access-Control-Allow-Origin': \"*\"\r\n      })\r\n    };\r\n\r\n    body.set('id_familia', id);\r\n\r\n    return this.http.post<any>(environment.RG_FUNC_PATH, body, httpOptions).toPromise();\r\n  }\r\n\r\n  homeChartData(id: any){\r\n    let body = new URLSearchParams();\r\n\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/x-www-form-urlencoded',\r\n        'Access-Control-Allow-Origin': \"*\"\r\n      })\r\n    };\r\n\r\n    body.set('id_familia', id);\r\n\r\n    return this.http.post<any>(environment.HOME_FUNC_PATH, body, httpOptions).toPromise();\r\n  }\r\n\r\n  categoryData(id: any){\r\n    let body = new URLSearchParams();\r\n\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/x-www-form-urlencoded',\r\n        'Access-Control-Allow-Origin': \"*\"\r\n      })\r\n    };\r\n\r\n    body.set('id_familia', id);\r\n\r\n    return this.http.post<any>(environment.CATEGORY_FUNC_PATH, body, httpOptions).toPromise();\r\n  }\r\n  \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\r\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\r\n\r\nimport { Platform } from '@ionic/angular';\r\nimport { Observable, of } from 'rxjs';\r\nimport { first, switchMap, take, map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport * as firebase from 'firebase/compat/app';\r\nimport { GooglePlus } from '@ionic-native/google-plus/ngx';\r\nimport { Router } from '@angular/router';\r\nimport { AngularFireStorage } from '@angular/fire/compat/storage';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class UserService {\r\n\r\n  constructor(private afAuth: AngularFireAuth,\r\n    private afs: AngularFirestore,\r\n    private platform: Platform,\r\n    private googlePlus: GooglePlus,\r\n    private router : Router,\r\n    private angularFireStorage: AngularFireStorage) { }\r\n\r\n  async updateUserProfileData(user) {\r\n    return await this.afs.collection(\"users\").doc(user.uid).update({description: user.description, displayName: user.displayName, email: user.email})\r\n  }\r\n\r\n  getFamilyMembers(fid) {\r\n    return this.afs.collection(\"users\", ref => ref.where(\"id_familia\", \"==\", fid).where(\"active\", \"==\", true)).valueChanges();\r\n  }\r\n\r\n  async getUserbyId(uid) {\r\n    return await this.afs.collection(\"users\", ref => ref.where(\"uid\", \"==\", uid)).valueChanges()\r\n  }\r\n\r\n  async savePhotoURL(user, path){\r\n    return await this.afs.collection(\"users\").doc(user).update({photoURL: path})\r\n  }\r\n\r\n  async deletePreviousPhoto(path) {\r\n    return await this.angularFireStorage.storage.refFromURL(path).delete();\r\n\r\n  }\r\n\r\n  async changeFamily(user, family) {\r\n    return await this.afs.collection(\"users\").doc(user.uid).update({id_familia: family.id})\r\n  }\r\n\r\n  async deleteFamily(user, family) {\r\n    return await this.afs.collection(\"users\").doc(user).update({id_familia: family})\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}