{"version":3,"file":"src_app_pages_admin_ver-gastos-familia_ver-gastos-familia_module_ts.js","mappings":"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","sources":["./src/app/domain/gasto.ts","./src/app/pages/admin/ver-gastos-familia/ver-gastos-familia-routing.module.ts","./src/app/pages/admin/ver-gastos-familia/ver-gastos-familia.module.ts","./src/app/pages/admin/ver-gastos-familia/ver-gastos-familia.page.ts","./src/app/services/gastos.service.ts"],"sourcesContent":["//Declaracion de clase Gasto\r\nexport class Gasto {\r\n    id:string;\r\n    monto:number;\r\n    id_usuario:string;\r\n    id_familia:string;\r\n    id_categoria:string;\r\n    fecha:string;\r\n    descripcion:string;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { VerGastosFamiliaPage } from './ver-gastos-familia.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: VerGastosFamiliaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class VerGastosFamiliaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { VerGastosFamiliaPageRoutingModule } from './ver-gastos-familia-routing.module';\r\n\r\nimport { VerGastosFamiliaPage } from './ver-gastos-familia.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    VerGastosFamiliaPageRoutingModule\r\n  ],\r\n  declarations: [VerGastosFamiliaPage]\r\n})\r\nexport class VerGastosFamiliaPageModule {}\r\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Gasto } from 'src/app/domain/gasto';\r\nimport { GastosService } from 'src/app/services/gastos.service';\r\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\r\nimport { take } from 'rxjs/operators';\r\nimport { AlertController, MenuController,LoadingController } from '@ionic/angular';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\n\r\n@Component({\r\n  selector: 'app-ver-gastos-familia',\r\n  templateUrl: './ver-gastos-familia.page.html',\r\n  styleUrls: ['./ver-gastos-familia.page.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class VerGastosFamiliaPage implements OnInit {\r\n  \r\n  gastosF:Gasto[]=[]//Vector de objetos 'Gasto', almacenar en formato visualizacion de informacion de firebase\r\n  \r\n  //Variables para almacenamiento de respuestas desde Firebase de consultas de cada coleccion\r\n  usuarios:any\r\n  gastos:any\r\n  usuario:any  \r\n  categories: any\r\n  filter: string = \"default\"\r\n  filterDate: string = \"todo\"\r\n  filteredContent: any\r\n  filtroAux: any\r\n\r\n  //Variables para una notificacion especifica\r\n  alert: string\r\n  advice: string\r\n\r\n  private sessionUser : any//Variable para la obtencion de usuario logeado\r\n \r\n  constructor(private route: ActivatedRoute,\r\n              private router: Router, \r\n              private gastoService: GastosService,//Declaracion de servicios para gastos\r\n              private alertCtrl: AlertController,//Declaracion de servicios para alertas\r\n              private loadingController: LoadingController,//Declaracion de servicios de pantalla de progreso\r\n              private auth :  AuthenticationService,//Declaracion de servicios de autenticacion\r\n              public menuCtrl: MenuController ) {//Declaracion de servicios para control del menu principal\r\n                this.menuCtrl.enable(true)//Menu activado\r\n                \r\n              }\r\n\r\n  async ngOnInit() {//Funcion inicial de la pagina\r\n    this.sessionUser = await this.auth.getUserAuth()//Utilizacion del servicio para obtener usuario que inicio sesion mediante Firebase  \r\n    \r\n\r\n    return await this.loadingController.create({ }).then(a => {//Llamado para pantalla de carga\r\n      a.present().then(async () => {\r\n        try {\r\n\r\n          //  Obtener las categorías\r\n          await this.gastoService.getCategories().pipe(take(1)).subscribe(cat => {\r\n            this.categories = cat;\r\n            this.obtenerGastosFml(a)//Llamado a funcion  diseñado\r\n          },\r\n          err => {\r\n            console.log('HTTP Error', err);\r\n            this.alert = \"Ocurrió un error al cargar sus datos\"\r\n            this.advice = 'Por favor, inténtelo de nuevo'\r\n          },\r\n          () => console.log('HTTP request stream done'));\r\n\r\n        } catch (error) {\r\n          //Caso de encontrar un error, definir mesaje para alerta y lanzar alerta\r\n          console.log(error)\r\n          this.alert = \"Ocurrió un error al cargar sus datos\"\r\n          this.advice = 'Por favor, inténtelo de nuevo'\r\n\r\n          a.dismiss().then(() => console.log('abort presenting'))//Termino de pantalla de carga\r\n          this.genericAlert(this.alert, this.advice)\r\n\r\n        }\r\n\r\n      }) \r\n    })\r\n        \r\n  }  \r\n  async obtenerGastosFml(a:any){//Funcion para lectura de gastos de los miembors de la familia, calculo de gastos por categoria\r\n    this.sessionUser.pipe(take(1)).subscribe(async user =>{     \r\n      \r\n      this.usuario = await this.auth.getUsuario(user.email)//Utilizacion de servicio para obtener usuario en base a consulta base de datos        \r\n      this.usuario.forEach((element) => {//Recorrido de respuesta del servicio\r\n        this.gastos=this.gastoService.obtenerGastosFamilia(element[0].id_familia)//Utilizacion de servicio para obtener gastos del usuario en base a consulta base de datos\r\n        \r\n        this.gastos.forEach(element => {\r\n          for (let index = 0; index < element.length; index++) {\r\n            let aux:Gasto=new Gasto()//Variable auxilizar de clase gasto\r\n            //Asignacion de valores correspondientes a la lectura desde Firebase, con cambios para la visualizacion\r\n            aux.id=element[index].id        \r\n            aux.monto=element[index].monto\r\n            aux.id_usuario=element[index].id_usuario\r\n            //Cambio de contenido de variabe segun categoria\r\n            this.categories.forEach(cat => {\r\n              if (cat.id === element[index].id_categoria){\r\n                aux.id_categoria = cat.name\r\n              }\r\n              \r\n            });  \r\n\r\n            aux.fecha=element[index].fecha\r\n            aux.descripcion=element[index].descripcion                        \r\n            this.gastosF.push(aux) //Adicion a vector para posterio lectura\r\n          }\r\n\r\n          this.filteredContent = this.gastosF\r\n          a.dismiss().then(() => console.log('abort presenting'))//Termino de pantalla de carga\r\n        });\r\n      });     \r\n    }) \r\n  } \r\n  async genericAlert(alert_message, advice){//Funcion para creacion de alerta\r\n    const prompt = await this.alertCtrl.create({//Llamado a creacion con el mensaje antes definido   \r\n      header: 'Lo sentimos',  \r\n      subHeader: alert_message,\r\n      message: advice,\r\n      buttons: ['Aceptar']//Boton de confirmacion\r\n    });\r\n    await prompt.present()\r\n  }\r\n\r\n  filterContent() {\r\n        \r\n    if (this.filter === \"default\") {\r\n      this.filteredContent = this.gastosF\r\n    } else {\r\n      this.filteredContent = this.gastosF.filter(data => data.id_categoria == this.filter)\r\n    }    \r\n\r\n  }\r\n\r\n  filterContentDate() {\r\n\r\n    if (this.filterDate === \"mes\") {\r\n      this.filtroAux = this.filteredContent\r\n      this.filteredContent = this.filteredContent.filter(data => (new Date(data.fecha)).getMonth() == (new Date).getMonth())\r\n    } else {\r\n      this.filteredContent = this.filtroAux\r\n    }    \r\n\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Gasto } from '../domain/gasto';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GastosService {  \r\n  // Debugging de la función localmente\r\n  // private regressionUrl = \"http://localhost:5000/gestionar-gastos/us-central1/regressionReq\";\r\n  \r\n  constructor(public afs: AngularFirestore, private http: HttpClient) { \r\n     \r\n  }\r\n\r\n  guardar(gasto:Gasto){//Funcion para guardar 'Gasto' en coleccion de Gastos\r\n    const refGastos = this.afs.collection(\"gastos\");//Referencia a la collecion en la que se desea guardar\r\n      \r\n      if (gasto.id == null){//En caso de que el objeto recibido no tenga un ID generarlo\r\n        gasto.id = this.afs.createId();        \r\n      }\r\n  \r\n      refGastos.doc(gasto.id).set(Object.assign({}, gasto));//Con la referencia guardar los datos\r\n  }\r\n\r\n  obtenerGastos(idG:any):Observable<any[]>{\r\n    return this.afs.collection(\"gastos\",\r\n            ref=> ref.where(\"id_usuario\",\"==\",idG)).valueChanges();//Consultar en la coleccion gastos todos los valores correspondientes a un usuario\r\n  } \r\n  \r\n  obtenerGastosFamilia(idG:any):Observable<any[]>{\r\n    return this.afs.collection(\"gastos\",\r\n            ref=> ref.where(\"id_familia\",\"==\",idG)).valueChanges();//Consultar en la coleccion gastos todos los valores correspondientes a un usuario\r\n  } \r\n\r\n  obtenerGastoPorId(id) {\r\n    return this.afs.collection(\"gastos\", ref => ref.where(\"id\", \"==\", id)).valueChanges()\r\n  }\r\n\r\n  obtenerusrFamilia(idF:any):Observable<any[]>{    \r\n    //Consultar en la coleccion users todos los usuarios correspondientes a una familia y que se encuentren activos\r\n    return this.afs.collection(\"users\",\r\n            ref=> ref.where(\"id_familia\",\"==\",idF).where(\"active\",\"==\",true)).valueChanges();\r\n  }\r\n  \r\n  getCategories(){\r\n    return this.afs.collection(\"categories\").valueChanges()\r\n  }\r\n\r\n  regression(id: any) {\r\n    let body = new URLSearchParams();\r\n\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/x-www-form-urlencoded',\r\n        'Access-Control-Allow-Origin': \"*\"\r\n      })\r\n    };\r\n\r\n    body.set('id_familia', id);\r\n\r\n    return this.http.post<any>(environment.RG_FUNC_PATH, body, httpOptions).toPromise();\r\n  }\r\n\r\n  homeChartData(id: any){\r\n    let body = new URLSearchParams();\r\n\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/x-www-form-urlencoded',\r\n        'Access-Control-Allow-Origin': \"*\"\r\n      })\r\n    };\r\n\r\n    body.set('id_familia', id);\r\n\r\n    return this.http.post<any>(environment.HOME_FUNC_PATH, body, httpOptions).toPromise();\r\n  }\r\n  \r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}