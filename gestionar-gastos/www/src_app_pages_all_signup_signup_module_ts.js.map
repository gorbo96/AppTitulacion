{"version":3,"file":"src_app_pages_all_signup_signup_module_ts.js","mappings":"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","sources":["./src/app/pages/all/signup/signup-routing.module.ts","./src/app/pages/all/signup/signup.module.ts","./src/app/pages/all/signup/signup.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SignupPage } from './signup.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SignupPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SignupPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SignupPageRoutingModule } from './signup-routing.module';\r\n\r\nimport { SignupPage } from './signup.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SignupPageRoutingModule\r\n  ],\r\n  declarations: [SignupPage]\r\n})\r\nexport class SignupPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { AlertController, LoadingController, MenuController } from '@ionic/angular';\r\nimport { throws } from 'assert';\r\nimport { User } from 'src/app/domain/user';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\n\r\n@Component({\r\n  selector: 'app-signup',\r\n  templateUrl: './signup.page.html',\r\n  styleUrls: ['./signup.page.scss'],\r\n})\r\nexport class SignupPage implements OnInit {\r\n\r\n  User : User = new User()\r\n  ID: any\r\n\r\n  alert: string\r\n  advice: string\r\n  header: string\r\n  \r\n  constructor(private router: Router, \r\n              private auth: AuthenticationService, \r\n              private alertCtrl: AlertController,\r\n              public menuCtrl: MenuController,\r\n              private loadingController: LoadingController) {\r\n                this.menuCtrl.enable(false)\r\n              }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async registro(){\r\n\r\n    if((this.User.email === null || this.User.email === undefined) || \r\n      (this.User.password === null || this.User.password === undefined) ||\r\n      (this.User.displayName === null || this.User.displayName === undefined)){\r\n        this.alert = \"Ocurrió un error\"\r\n        this.advice = 'Por favor, ingrese los datos necesarios'\r\n        \r\n        //  Mostrar mensaje de al usuario\r\n        return this.genericAlert('Lo sentimos',this.alert, this.advice);\r\n\r\n      }\r\n    \r\n    const user = await this.auth.onRegistro(this.User);\r\n    this.User.role = 'N'\r\n    this.User.description = 'Hola, estoy manejando mis finanzas'\r\n    this.User.active = true\r\n    this.User.id_familia = \"-1\"\r\n    this.User.photoURL = 'https://firebasestorage.googleapis.com/v0/b/gestionar-gastos.appspot.com/o/default.png?alt=media&token=e8ff50d0-3177-4b40-acf6-d29127a6baf3'\r\n    this.User.createdAt = new Date()\r\n    this.User.lastLogin = new Date()\r\n    this.User.provider = 'gestion-gastos'\r\n\r\n    // Control de la interacción del usuario usando una rueda de carga\r\n    return await this.loadingController.create({ }).then(a => {\r\n      a.present().then(async () => { \r\n\r\n        try {\r\n\r\n          if(user){\r\n            this.ID = await this.auth.verificacion();\r\n            console.log(\" ES EL ID (EMAIL)\",  this.ID);\r\n      \r\n            await this.auth.save(this.User);\r\n            console.log(\"exito de registro \");\r\n\r\n            a.dismiss().then(() => console.log('abort presenting'));\r\n    \r\n            this.header = 'Bienvenido'\r\n            this.alert = \"Se ha registrado el usuario con éxito\"\r\n            this.advice = '¡Comienze a gestionar su dinero!'\r\n            this.genericAlert(this.header, this.alert, this.advice)\r\n      \r\n          }else{\r\n            console.log(\"error en registro\")\r\n            this.header = 'Lo sentimos'\r\n            this.alert = \"Ocurrió un error inesperado en con el registro\"\r\n            this.advice = 'Por favor, inténtelo de nuevo'\r\n      \r\n            this.genericAlert(this.header,this.alert, this.advice)\r\n          }\r\n    \r\n        } catch (error) {\r\n          this.header = 'Lo sentimos'\r\n          this.alert = \"Ocurrió un error inesperado en con el registro\"\r\n          this.advice = 'Por favor, inténtelo de nuevo'\r\n    \r\n          this.genericAlert(this.header,this.alert, this.advice)\r\n        } finally {\r\n          a.dismiss().then(() => console.log('abort presenting'));\r\n          this.router.navigate([\"/login\"])\r\n        }\r\n\r\n      }) \r\n    })\r\n\r\n  }\r\n\r\n  regresar(){\r\n    this.router.navigate([\"/login\"])\r\n  }\r\n\r\n  async dismiss() {\r\n    return await this.loadingController.dismiss().then(() => console.log('dismissed'));\r\n  }\r\n\r\n  async genericAlert(header, alert_message, advice){\r\n\r\n    const prompt = await this.alertCtrl.create({  \r\n      header: header,  \r\n      subHeader: alert_message,\r\n      message: advice,  \r\n      \r\n      buttons: ['Aceptar']  \r\n    }); \r\n\r\n    await prompt.present()\r\n\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}